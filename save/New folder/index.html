<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8"/>
        <link rel="stylesheet" href="style.css"/>    
        <script src="jquery-2.1.3.min.js"></script>
        <script>
            $(document).ready(function() {
                document.addEventListener('keydown', keydown, false);
                var KEY     = { ESC: 27, SPACE: 32, LEFT: 37, UP: 38, RIGHT: 39, DOWN: 40 };
                var c = document.getElementById("canvas");
                var ctx = c.getContext("2d");
                ctx.lineWidth = 1;
                var couleur = ['#FA6E69', '#FFCE74', '#97D17A', '#4C8DA6', '#5B608C'];
                var left = 0;
                var largeurEcran = parseInt($("#canvas").css('width'));
                var colonne = 0;
                var hauteurEcran = 800;
                var largeurEcran = 400;
                var hauteurBlock = 50;
                var xBlock=0,yBlock=0;
                var clear=true;
                var NxBlock,NyBlock;
                var blocks = new Array();
                for (a=0;a<=largeurEcran/hauteurBlock;a++){
                    blocks[a] = new Array();
                    for (b=0;b<=hauteurEcran/hauteurBlock;b++){
                        blocks[a][b] = 0;
                    }
                }
                function newBlock(){
                    left = 0;
                    var i = 0;
                    var random = Math.floor((Math.random()*couleur.length));
                    var down = setInterval(function(){
                        if (i > 2 ){
                        }
                        NxBlock = hauteurBlock * colonne;
                        NyBlock = left;
                        if (blocks[NxBlock/hauteurBlock][NyBlock/hauteurBlock] == 0){
                            ctx.fillStyle=couleur[random];
                            if (clear == true) {
                                ctx.clearRect(xBlock-1, yBlock-1, hauteurBlock+2, hauteurBlock+2);
                            } else {
                                clear = true;
                            }
                        }
                        xBlock = NxBlock;
                        yBlock = NyBlock;
                        if (blocks[NxBlock/hauteurBlock][NyBlock/hauteurBlock] == 0){    
                            ctx.fillRect(NxBlock, NyBlock, hauteurBlock, hauteurBlock);
                            ctx.strokeRect(NxBlock, NyBlock, hauteurBlock, hauteurBlock);
                        }
                        i++;
                        if (blocks[NxBlock/hauteurBlock][(NyBlock/hauteurBlock)+1] == 0 && i < (hauteurEcran/hauteurBlock)){
                            left = left + hauteurBlock ;
                        } else {
                            blocks[NxBlock/hauteurBlock][NyBlock/hauteurBlock] = 1; 
                            clearInterval(down);
                            newBlock();
                            clear = false;
                        }
                    },250);
                };
                newBlock();
                function keydown(ev) {
                    switch(ev.keyCode) {
                        case KEY.LEFT:
                            if (colonne > 0) {
                                colonne = colonne - 1;
                            }
                            break;
                        case KEY.RIGHT:
                            if (colonne < (largeurEcran/hauteurBlock)-1) {
                                colonne = colonne + 1;
                            }
                            break;
                        case KEY.UP:    break;
                        case KEY.DOWN: 
                            left = left - 25;
                            break;
                    }
                };
            });
        </script>
    </head>
    <body> 
        <div id="page">
            <h1 id="titre">test</h1>
            <canvas id="canvas" width="400px" height="800px">
                Sorry, this example cannot be run because your browser does not support the &lt;canvas&gt; element
            </canvas>
            <div id="score-jeu"></div>
            <div id="menu-jeu"></div>
        </div>
    </body>
</html>